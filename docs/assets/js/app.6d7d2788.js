(function(e){function t(t){for(var n,r,o=t[0],c=t[1],l=t[2],d=0,h=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(h.length)h.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(n=!1)}n&&(s.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},i={app:0},s=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("64a9"),i=a.n(n);i.a},3826:function(e,t,a){"use strict";var n=a("9cfe"),i=a.n(n);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("a026"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("nav",{staticClass:"navbar navbar-light bg-light justify-content-between"},[a("a",{staticClass:"navbar-brand"},[e._v("Camera")]),a("div",[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}]},[a("i",{staticClass:"settings fas fa-cog"})]),a("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Cloudinary Upload Info"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.handleOk}},[a("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.updateSettings(t)}}},[a("b-form-group",{attrs:{state:e.cloudNameState,label:"Cloudname","label-for":"cloud-name-input","invalid-feedback":"Cloudname is required"}},[a("b-form-input",{attrs:{id:"cloud-name-input",state:e.cloudNameState,required:""},model:{value:e.cloudname,callback:function(t){e.cloudname=t},expression:"cloudname"}})],1),a("b-form-group",{attrs:{state:e.presetState,label:"Preset","label-for":"preset-input","invalid-feedback":"Preset is required"}},[a("b-form-input",{attrs:{id:"preset-input",state:e.presetState,required:""},model:{value:e.preset,callback:function(t){e.preset=t},expression:"preset"}})],1)],1)])],1)]),a("Home")],1)},s=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("camera")],1)},o=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"camera"},[a("div",[a("b-button-group",[a("b-button",{attrs:{disabled:!e.isStartEnabled},on:{click:e.start}},[e._v("Start")]),a("b-button",{attrs:{disabled:e.isStartEnabled},on:{click:e.stop}},[e._v("Stop")]),a("b-button",{attrs:{disabled:e.isStartEnabled},on:{click:e.snapshot}},[e._v("Snapsot")]),a("b-button",{attrs:{disabled:!e.isPhoto},on:{click:e.download}},[e._v("Downlolad")])],1)],1),a("form",{},[a("b-form-select",{attrs:{options:e.options,size:"sm"},model:{value:e.selectedDevice,callback:function(t){e.selectedDevice=t},expression:"selectedDevice"}})],1),e._m(0),e._m(1),a("div",{attrs:{id:"gallery"}}),a("a",{attrs:{href:"https://github.com/rebeccapeltz/vue-camera",title:"View source for this page on GitHub",id:"viewSource"}},[e._v("\n    View\n    source on GitHub\n  ")])])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"container"}},[a("video",{attrs:{playsinline:"",autoplay:""}}),a("canvas")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"upload-form",attrs:{id:"upload-form"}},[a("input",{attrs:{type:"text",name:"cloud-name",value:"picturecloud7",placeholder:"Enter cloud name"}}),a("input",{attrs:{type:"text",name:"preset",value:"bp_test_1",placeholder:"Enter upload preset"}}),a("button",{attrs:{type:"submit"}},[e._v("Upload")])])}],u=(a("ac4d"),a("8a81"),a("96cf"),a("3b8d")),d=(a("ac6a"),{name:"Camera",data:function(){return{video:null,canvas:null,fileData:null,isStartEnabled:!0,isPhoto:!1,stream:null,currentStream:null,devices:[],options:[],constraints:{},selectedDevice:"0"}},methods:{snapshot:function(){console.log("snapshot"),this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas.getContext("2d").drawImage(this.video,0,0,this.canvas.width,this.canvas.height),this.fileData=this.canvas.toDataURL("image/jpeg"),this.isPhoto=!0},stop:function(){console.log("stop"),this.video.pause(),this.currentStream&&(this.currentStream.getTracks().forEach((function(e){e.stop()})),this.video.srcObject=null),this.video.removeAttribute("src"),this.video.load(),this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.isStartEnabled=!0,this.isPhoto=!1},start:function(){console.log("start"),this.stop(),this.getMedia(),this.isStartEnabled=!1},download:function(){if(console.log("downlaod"),this.fileData){console.log("download"),this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas.getContext("2d").drawImage(this.video,0,0,this.canvas.width,this.canvas.height);var e=document.createElement("a");e.href=this.fileData,e.textContent="photo",e.target="_blank",e.download="photo.jpeg",document.querySelector("body").append(e),e.click()}},getMedia:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia(this.constraints);case 3:this.stream=e.sent,window.stream=this.stream,this.currentStream=stream,this.video.srcObject=stream,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log("getmedia",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),setConstraints:function(){this.constraints={video:{facingMode:"environment"},audio:!1}},getDevices:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,s,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=3;break}return console.log("enumerateDevices() not supported."),e.abrupt("return");case 3:return e.prev=3,e.next=6,navigator.mediaDevices.enumerateDevices();case 6:for(t=e.sent,a=!0,n=!1,i=void 0,e.prev=10,s=t[Symbol.iterator]();!(a=(r=s.next()).done);a=!0)o=r.value,console.log("enumerate",o),"videoinput"===o.kind&&(c={},c.text=o.label,c.value=o.deviceId,this.options.push(c),this.devices.push(o));e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](10),n=!0,i=e.t0;case 18:e.prev=18,e.prev=19,a||null==s.return||s.return();case 21:if(e.prev=21,!n){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:this.options.length<3&&(this.selectedDevice=this.options[1].value),e.next=32;break;case 29:e.prev=29,e.t1=e["catch"](3),console.log("getDevices",e.t1);case 32:console.log("devices",this.devices);case 33:case"end":return e.stop()}}),e,this,[[3,29],[10,14,18,26],[19,,21,25]])})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.canvas=document.querySelector("canvas"),this.video=document.querySelector("video"),this.options.push({text:"Select Device",value:0}),this.getDevices(),this.setConstraints(),this.getMedia(),this.isStartEnabled=!1}}),h=d,p=(a("a253"),a("2877")),v=Object(p["a"])(h,c,l,!1,null,"768bc89a",null),f=v.exports,m={name:"Home",props:{msg:String},components:{camera:f}},b=m,g=(a("3826"),Object(p["a"])(b,r,o,!1,null,"408737d5",null)),w=g.exports,S={name:"app",components:{Home:w},created:function(){this.$ls.get("cloudname")&&(this.cloudname=this.$ls.get("cloudname")),this.$ls.get("preset")&&(this.preset=this.$ls.get("preset"))},data:function(){return{cloudname:"",cloudNameState:null,preset:"",presetState:null}},methods:{checkFormValidity:function(){var e=this.$refs.form.checkValidity();return this.nameState=e?"valid":"invalid",e},resetModal:function(){this.cloudName="",this.cloudNameState=null,this.preset="",this.presetState=null},handleOk:function(e){e.preventDefault(),this.handleSubmit()},handleSubmit:function(){var e=this;this.checkFormValidity()&&(this.$ls.set("cloudname",this.cloudname),this.$ls.set("preset",this.preset),this.$nextTick((function(){e.$refs.modal.hide()})))}}},y=S,x=(a("034f"),Object(p["a"])(y,i,s,!1,null,null,null)),k=x.exports,_=a("8c4f");n["default"].use(_["a"]);var D=new _["a"]({routes:[{path:"/",name:"home",component:w}]}),j=a("5f5b"),O=(a("f9e3"),a("2dd8"),a("c16e")),C=a.n(O);n["default"].use(j["a"]);var E={namespace:"vuejs__",name:"ls",storage:"local"};n["default"].use(C.a,E),n["default"].config.productionTip=!1,new n["default"]({router:D,render:function(e){return e(k)}}).$mount("#app")},"64a9":function(e,t,a){},"9cfe":function(e,t,a){},a253:function(e,t,a){"use strict";var n=a("be11"),i=a.n(n);i.a},be11:function(e,t,a){}});
//# sourceMappingURL=app.6d7d2788.js.map