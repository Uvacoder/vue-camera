(function(e){function t(t){for(var n,r,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(n=!1)}n&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},s={app:0},o=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("64a9"),s=a.n(n);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("a026"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("nav",{staticClass:"navbar navbar-light bg-light justify-content-between"},[a("a",{staticClass:"navbar-brand"},[e._v("Camera")]),a("div",[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}]},[a("i",{staticClass:"settings fas fa-cog"})]),a("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Cloudinary Upload Info"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.handleOk}},[a("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.updateSettings(t)}}},[a("b-form-group",{attrs:{state:e.cloudnameState,label:"Cloudname","label-for":"cloud-name-input","invalid-feedback":"Cloudname is required"}},[a("b-form-input",{attrs:{id:"cloud-name-input",state:e.cloudnameState,required:""},model:{value:e.cloudname,callback:function(t){e.cloudname=t},expression:"cloudname"}})],1),a("b-form-group",{attrs:{state:e.presetState,label:"Preset","label-for":"preset-input","invalid-feedback":"Preset is required"}},[a("b-form-input",{attrs:{id:"preset-input",state:e.presetState,required:""},model:{value:e.preset,callback:function(t){e.preset=t},expression:"preset"}})],1),a("b-form-group",[a("b-form-checkbox",{attrs:{id:"clearsettings",name:"clearsettings",value:"true","unchecked-value":"false"},model:{value:e.clearsettings,callback:function(t){e.clearsettings=t},expression:"clearsettings"}},[e._v("Clear Settings")])],1)],1)])],1)]),a("Home",{attrs:{cloudname:e.cloudname,preset:e.preset}})],1)},o=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("camera",{attrs:{cloudname:e.cloudname,preset:e.preset}})],1)},i=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"camera"},[a("div",[a("b-button-group",[a("b-button",{attrs:{disabled:!e.isStartEnabled},on:{click:e.start}},[e._v("Start")]),a("b-button",{attrs:{disabled:e.isStartEnabled},on:{click:e.stop}},[e._v("Stop")]),a("b-button",{attrs:{disabled:e.isStartEnabled},on:{click:e.snapshot}},[e._v("Snapsot")]),a("b-button",{attrs:{disabled:!e.isPhoto},on:{click:e.download}},[e._v("Downlolad")]),a("b-button",{attrs:{disabled:!e.isPhoto||0===e.cloudname.length||0===e.preset.length},on:{click:e.upload}},[e._v("Upload")])],1)],1),a("form",{},[a("b-form-select",{attrs:{options:e.options,size:"sm"},model:{value:e.selectedDevice,callback:function(t){e.selectedDevice=t},expression:"selectedDevice"}})],1),e._m(0),e._m(1),a("div",{attrs:{id:"gallery"}}),a("a",{attrs:{href:"https://github.com/rebeccapeltz/vue-camera",title:"View source for this page on GitHub",id:"viewSource"}},[e._v("\n    View\n    source on GitHub\n  ")])])},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"container"}},[a("video",{attrs:{playsinline:"",autoplay:""}}),a("canvas")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"upload-form",attrs:{id:"upload-form"}},[a("input",{attrs:{type:"text",name:"cloud-name",value:"picturecloud7",placeholder:"Enter cloud name"}}),a("input",{attrs:{type:"text",name:"preset",value:"bp_test_1",placeholder:"Enter upload preset"}}),a("button",{attrs:{type:"submit"}},[e._v("Upload")])])}],u=(a("ac4d"),a("8a81"),a("96cf"),a("ac6a"),a("3b8d")),d=a("bc3a"),p=a.n(d);function h(e,t,a){return v.apply(this,arguments)}function v(){return v=Object(u["a"])(regeneratorRuntime.mark((function e(t,a,n){var s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=new FormData,s.append("upload_preset",a),s.append("tags","browser_upload"),s.append("file",n),e.next=7,p()({method:"post",url:"https://api.cloudinary.com/v1_1/".concat(t,"/upload"),data:s});case 7:return o=e.sent,console.log(o),e.next=11,o.data;case 11:return e.abrupt("return",e.sent);case 14:e.prev=14,e.t0=e["catch"](0),console.log("error upload:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),v.apply(this,arguments)}var m={name:"Camera",data:function(){return{video:null,canvas:null,fileData:null,isStartEnabled:!0,isPhoto:!1,stream:null,currentStream:null,devices:[],options:[],constraints:{},selectedDevice:"0"}},methods:{upload:function(){if(console.log("upload"),0===this.cloudname.length||0===this.preset.length)return console.log("error: upload missing cloudname or preset"),void this.$bvToast.toast("Upload to Cloudinary unsuccessful: use settings to provide cloudname and preset",{title:"Cloudinary Upload",autoHideDelay:5e3,appendToast:!1});h(this.cloudname,this.preset,this.fileData);this.$bvToast.toast("Upload to Cloudinary successful",{title:"Cloudinary Upload",autoHideDelay:5e3,appendToast:!1})},snapshot:function(){console.log("snapshot"),this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas.getContext("2d").drawImage(this.video,0,0,this.canvas.width,this.canvas.height),this.fileData=this.canvas.toDataURL("image/jpeg"),this.isPhoto=!0},stop:function(){console.log("stop"),this.video.pause(),this.currentStream&&(this.currentStream.getTracks().forEach((function(e){e.stop()})),this.video.srcObject=null),this.video.removeAttribute("src"),this.video.load(),this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.isStartEnabled=!0,this.isPhoto=!1},start:function(){console.log("start"),this.stop(),this.getMedia(),this.isStartEnabled=!1},download:function(){if(console.log("downlaod"),this.fileData){console.log("download"),this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas.getContext("2d").drawImage(this.video,0,0,this.canvas.width,this.canvas.height);var e=document.createElement("a");e.href=this.fileData,e.textContent="photo",e.target="_blank",e.download="photo.jpeg",document.querySelector("body").append(e),e.click()}},getMedia:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia(this.constraints);case 3:this.stream=e.sent,window.stream=this.stream,this.currentStream=stream,this.video.srcObject=stream,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log("getmedia",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),setConstraints:function(){this.constraints={video:{facingMode:"environment"},audio:!1}},getDevices:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,a,n,s,o,r,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=3;break}return console.log("enumerateDevices() not supported."),e.abrupt("return");case 3:return e.prev=3,e.next=6,navigator.mediaDevices.enumerateDevices();case 6:for(t=e.sent,a=!0,n=!1,s=void 0,e.prev=10,o=t[Symbol.iterator]();!(a=(r=o.next()).done);a=!0)i=r.value,console.log("enumerate",i),"videoinput"===i.kind&&(l={},l.text=i.label,l.value=i.deviceId,this.options.push(l),this.devices.push(i));e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](10),n=!0,s=e.t0;case 18:e.prev=18,e.prev=19,a||null==o.return||o.return();case 21:if(e.prev=21,!n){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:this.options.length<3&&(this.selectedDevice=this.options[1].value),e.next=32;break;case 29:e.prev=29,e.t1=e["catch"](3),console.log("getDevices",e.t1);case 32:console.log("devices",this.devices);case 33:case"end":return e.stop()}}),e,this,[[3,29],[10,14,18,26],[19,,21,25]])})));function t(){return e.apply(this,arguments)}return t}()},props:["cloudname","preset"],mounted:function(){console.log("cloudname",this.cloudname),this.canvas=document.querySelector("canvas"),this.video=document.querySelector("video"),this.options.push({text:"Select Device",value:0}),this.getDevices(),this.setConstraints(),this.getMedia(),this.isStartEnabled=!1}},f=m,b=(a("7bc2"),a("2877")),g=Object(b["a"])(f,l,c,!1,null,"4be2c395",null),w=g.exports,y={name:"Home",props:["cloudname","preset"],components:{camera:w}},x=y,S=(a("652d"),Object(b["a"])(x,r,i,!1,null,"0c7894ac",null)),k=S.exports,_={name:"app",components:{Home:k},created:function(){this.$ls.get("cloudname")&&(this.cloudname=this.$ls.get("cloudname"),console.log("App.vue cloudname",this.cloudname)),this.$ls.get("preset")&&(this.preset=this.$ls.get("preset"))},data:function(){return{cloudname:"",cloudnameState:null,preset:"",presetState:null,clearsettings:"false",expire:36e5}},methods:{checkFormValidity:function(){return!0},resetModal:function(){this.cloudname=this.$ls.get("cloudname",""),this.cloudnameState=null,this.preset=this.$ls.get("preset",""),this.presetState=null},handleOk:function(e){e.preventDefault(),this.handleSubmit()},handleSubmit:function(){var e=this;if("true"===this.clearsettings)return this.$ls.clear(),this.cloudname="",this.preset="",this.clearsettings="false",void this.$nextTick((function(){e.$refs.modal.hide()}));this.checkFormValidity()?(this.$ls.set("cloudname",this.cloudname,this.expire),this.$ls.set("preset",this.preset,this.expire),this.$nextTick((function(){e.$refs.modal.hide()}))):console.log("settings data not valid")}}},D=_,C=(a("034f"),Object(b["a"])(D,s,o,!1,null,null,null)),j=C.exports,O=a("8c4f");n["default"].use(O["a"]);var $=new O["a"]({routes:[{path:"/",name:"home",component:k}]}),E=a("5f5b"),P=(a("f9e3"),a("2dd8"),a("c16e")),M=a.n(P);n["default"].use(E["a"]);var T={namespace:"vuejs__",name:"ls",storage:"local"};n["default"].use(M.a,T),n["default"].config.productionTip=!1,new n["default"]({router:$,render:function(e){return e(j)}}).$mount("#app")},"64a9":function(e,t,a){},"652d":function(e,t,a){"use strict";var n=a("a32f"),s=a.n(n);s.a},"7bc2":function(e,t,a){"use strict";var n=a("f927"),s=a.n(n);s.a},a32f:function(e,t,a){},f927:function(e,t,a){}});
//# sourceMappingURL=app.1cf34edc.js.map